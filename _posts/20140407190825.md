---
ID: 1180
post_title: '[JavaScript] 数値をカンマ区切りにする方法'
published: true
post_date: 2014-04-07 19:08:25
modified_date: 2015-02-28 22:30:48
slug: 20140407190825.html
categories: |
  ---
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:384;s:4:\"name\";s:10:\"JavaScript\";s:4:\"slug\";s:10:\"javascript\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:402;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:53;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:384;s:14:\"category_count\";i:53;s:20:\"category_description\";s:0:\"\";s:8:\"cat_name\";s:10:\"JavaScript\";s:17:\"category_nicename\";s:10:\"javascript\";s:15:\"category_parent\";i:0;}"
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:14;s:4:\"name\";s:15:\"\u30D7\u30ED\u30B0\u30E9\u30E0\";s:4:\"slug\";s:7:\"program\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:14;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:121;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:14;s:14:\"category_count\";i:121;s:20:\"category_description\";s:0:\"\";s:8:\"cat_name\";s:15:\"\u30D7\u30ED\u30B0\u30E9\u30E0\";s:17:\"category_nicename\";s:7:\"program\";s:15:\"category_parent\";i:0;}"
  ...
tags: |
  --- []
  ...
---
JavaScriptで数値にカンマを付けたり外したり…
一般のサイトなんかではあまり使わないかもしれないですが、業務アプリとかだと日常茶飯事だったりします。
<!--more-->
整理がてらメモにあったものを公開しておきたいと思います。

<h2>見づらい</h2>
新人の頃に作ったアプリで使われていたカンマ区切りのロジック。
非常に見づらいです。頑張って作ったのでしょう。
<pre class="prettyprint linenums lang-js">function insertComma(num) {
    while ( num != ( num = num.replace( /^(-?\d+)(\d{3})/, "$1,$2" ) ) );
    return num;
}</pre>

<h2>理想的な方法</h2>
最近はこんな感じでカンマ区切りしてます。保守もしやすくてイイ感じです。
<pre class="prettyprint linenums lang-js">function insertComma(num) {
    return String(num).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,');
}</pre>

<h2>ちょっとクールな方法</h2>
一応、こういう方法もあるっぽいです。
確認したところ、最新のブラウザでは有効でした。
<pre class="prettyprint linenums lang-js">function insertComma(num) {
    return num.toLocaleString();
}
// Chrome 33
// Firefox 28
// Internet Explorer 11</pre>