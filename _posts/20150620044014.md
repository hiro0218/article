---
ID: 2021
title: >
  日本語WebフォントにNoto Sans CJK
  JPを指定する時に気を付けたこと
published: true
date: 2015-06-20 04:40:14
updated: 2019-06-03 14:11:30
slug: 20150620044014.html
categories:
  - CSS
tags:
  - CSS
  - Noto Sans
  - フォント
---
## ここ最近の現状と前提

[Google FontsがNoto Sans JPの配信](https://fonts.google.com/specimen/Noto+Sans+JP)を始めた。
さらに `font-display: swap`などの対応も行われるようになり、少しずつパフォーマンスは改善している。

```
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP&display=swap" rel="stylesheet">
```

しかしながら、動的なページにおいては細切れにウェブフォントのデータを読み込み続ける必要があり、快適な閲覧環境を構築することは難しい。
しばらくは後述の最適化を自前で行いながらウェブフォントを使っていく必要がある。


<h2>背景</h2>
自サイト（ブログ）のフォントに日本語ウェブフォントを設定してみたくなった。

日本語ウェブフォントを配信（ホスティング）してくれるサービスもあるが、お金がないので自前で用意したいと思う。
（サービスには「n万PV/月までは無料」なプランとかもあるから、小規模なサイトにはそれでも良いかも）

無料で日本語フォントを使うなら色々と制限が出てくる。まず有料のフォントは使えないし、無料でも改変や再配布不可能なフォントはウェブフォントとしては使えない。
ここ近年、そんなライセンスの問題をクリアする無料の日本語フォントがいくつも提供されている。今回はその中でも「<b>Noto Sans CJK JP</b>」を使うことにした。**スマホなどでの読みやすさを課題としてデザインされた**とか…なのでブログに採用するのであれば最適ではないかと。

<h2>Noto Sans CJK JP とは</h2>

<figure>
<img alt="Noto Sans CJK JP" src="https://content.b.0218.jp/images/Google_Noto_Fonts.png">
<figcaption>Noto Sans CJK JP とは</figcaption>
</figure>

「Noto Sans CJK」は、Google と Adobe が共同開発したフォント。Adobe 側は「源ノ角ゴシック」という名称で提供している。<span class="text-muted">それぞれ微妙に違うとか言われてはいるけれど、違いはイマイチ分からない。</span>
あと日本語の漢字拡張をイワタが担当したとか。

個人的に「Noto Sans CJK」が好きなので、こちらを選択。

ウェイトは以下の7種類。

| weight | value |
| -------------- | --- |
| **Thin**       | 100 |
| **Light**      | 300 |
| **DemiLight**  | 350 |
| **Regular**    | 400 |
| **Medium**     | 500 |
| **Bold**       | 700 |
| **Black**      | 900 |

<h3>ライセンス</h3>

<ul>
 <li><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></li>
</ul>

<h3>Noto Sans CJK の配信サービス(余談)</h3>
<a href="https://www.google.com/fonts/earlyaccess">Google Fonts : Early Access</a>でウェブフォントとして配信されている。　Noto Sans Japanese (Japanese)
ただフルサイズなので16MBぐらいある。さすがに、このサイズは現実的ではない。(動作確認には良いかも)
<pre class="language-css"><code>@import url(http://fonts.googleapis.com/earlyaccess/notosansjapanese.css);</code></pre>


<h2>Noto Sans CJK JP を入手する</h2>
<p><a href="http://www.google.com/get/noto/">Google Noto Fonts</a> からダウンロードする。</p>

言語ごとにフォントが分けられているので「<strong>Noto Sans CJK JP</strong>」を選択してダウンロード。
zip形式で圧縮されているので解凍すると、それぞれの形式のフォントファイルが入っているのが確認できる。

<h2>使用するツール</h2>
この作業で使用するツールは以下の通り。それぞれ武蔵システムが提供している。
<ul>
 <li><a href="http://opentype.jp/subsetfontmk.htm">サブセットフォントメーカー</a> </li>
 <li><a href="http://opentype.jp/woffconv.htm">WOFFコンバータ</a></li>
</ul>


<h2>容量を減らす（サブセット化）</h2>
配信サービスとかだと、ページ内の文字を解析して使われている文字を動的に抽出してくれたりするみたいだけど、今回はそもそものフォントサイズを減らすことにした。

<h3>サブセットとは</h3>
前述のように「<b>Noto Sans CJK JP</b>」はフルサイズだと 16MB ほどある。そのため、予め必要最低限の文字だけを抽出したフォントファイルを作成(サブセット)して、サイズが小さくなったフォントをウェブフォントとして使用する必要がある。
要は、<mark>フォントの中から必要な文字だけを抜き出してフォントを作り直すこと</mark>である。

<h3>サブセットする</h3>
数字・アルファベット・記号・ひらがな／カタカナなどに加えて漢字は「第一水準漢字」を抽出する。

以下の文字を抽出する。
<pre style="overflow:auto; white-space:pre;"><code>!”#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~¡¢£¤¥¦§¨©ª«¬®¯°±²³´µ¶·¸¹º»¼½¾¿、。，．・：；？！゛゜´｀¨＾￣＿ヽヾゝゞ〃仝々〆〇ー―‐／＼〜∥｜…‥‘’“”（）〔〕［］｛｝〈〉《》「」『』【】＋－±×÷＝≠＜＞≦≧∞∴♂♀°′″℃￥＄￠￡％＃＆＊＠§☆★○●◎◇◆□■△▲▽▼※〒→←↑↓〓∈∋⊆⊇⊂⊃∪∩∧∨￢⇒⇔∀∃∠⊥⌒∂∇≡≒≪≫√∽∝∵∫∬Å‰♯♭♪†‡¶◯0123456789ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚぁあぃいぅうぇえぉおかがきぎくぐけげこごさざしじすずせぜそぞただちぢっつづてでとどなにぬねのはばぱひびぴふぶぷへべぺほぼぽまみむめもゃやゅゆょよらりるれろゎわゐゑをんァアィイゥウェエォオカガキギクグケゲコゴサザシジスズセゼソゾタダチヂッツヅテデトドナニヌネノハバパヒビピフブプヘベペホボポマミムメモャヤュユョヨラリルレロヮワヰヱヲンヴヵヶΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩαβγδεζηθικλμνξοπρστυφχψωАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдеёжзийклмнопрстуфхцчшщъыьэюя─│┌┐┘└├┬┤┴┼━┃┏┓┛┗┣┳┫┻╋┠┯┨┷┿┝┰┥┸╂亜唖娃阿哀愛挨姶逢葵茜穐悪握渥旭葦芦鯵梓圧斡扱宛姐虻飴絢綾鮎或粟袷安庵按暗案闇鞍杏以伊位依偉囲夷委威尉惟意慰易椅為畏異移維緯胃萎衣謂違遺医井亥域育郁磯一壱溢逸稲茨芋鰯允印咽員因姻引飲淫胤蔭院陰隠韻吋右宇烏羽迂雨卯鵜窺丑碓臼渦嘘唄欝蔚鰻姥厩浦瓜閏噂云運雲荏餌叡営嬰影映曳栄永泳洩瑛盈穎頴英衛詠鋭液疫益駅悦謁越閲榎厭円園堰奄宴延怨掩援沿演炎焔煙燕猿縁艶苑薗遠鉛鴛塩於汚甥凹央奥往応押旺横欧殴王翁襖鴬鴎黄岡沖荻億屋憶臆桶牡乙俺卸恩温穏音下化仮何伽価佳加可嘉夏嫁家寡科暇果架歌河火珂禍禾稼箇花苛茄荷華菓蝦課嘩貨迦過霞蚊俄峨我牙画臥芽蛾賀雅餓駕介会解回塊壊廻快怪悔恢懐戒拐改魁晦械海灰界皆絵芥蟹開階貝凱劾外咳害崖慨概涯碍蓋街該鎧骸浬馨蛙垣柿蛎鈎劃嚇各廓拡撹格核殻獲確穫覚角赫較郭閣隔革学岳楽額顎掛笠樫橿梶鰍潟割喝恰括活渇滑葛褐轄且鰹叶椛樺鞄株兜竃蒲釜鎌噛鴨栢茅萱粥刈苅瓦乾侃冠寒刊勘勧巻喚堪姦完官寛干幹患感慣憾換敢柑桓棺款歓汗漢澗潅環甘監看竿管簡緩缶翰肝艦莞観諌貫還鑑間閑関陥韓館舘丸含岸巌玩癌眼岩翫贋雁頑顔願企伎危喜器基奇嬉寄岐希幾忌揮机旗既期棋棄機帰毅気汽畿祈季稀紀徽規記貴起軌輝飢騎鬼亀偽儀妓宜戯技擬欺犠疑祇義蟻誼議掬菊鞠吉吃喫桔橘詰砧杵黍却客脚虐逆丘久仇休及吸宮弓急救朽求汲泣灸球究窮笈級糾給旧牛去居巨拒拠挙渠虚許距鋸漁禦魚亨享京供侠僑兇競共凶協匡卿叫喬境峡強彊怯恐恭挟教橋況狂狭矯胸脅興蕎郷鏡響饗驚仰凝尭暁業局曲極玉桐粁僅勤均巾錦斤欣欽琴禁禽筋緊芹菌衿襟謹近金吟銀九倶句区狗玖矩苦躯駆駈駒具愚虞喰空偶寓遇隅串櫛釧屑屈掘窟沓靴轡窪熊隈粂栗繰桑鍬勲君薫訓群軍郡卦袈祁係傾刑兄啓圭珪型契形径恵慶慧憩掲携敬景桂渓畦稽系経継繋罫茎荊蛍計詣警軽頚鶏芸迎鯨劇戟撃激隙桁傑欠決潔穴結血訣月件倹倦健兼券剣喧圏堅嫌建憲懸拳捲検権牽犬献研硯絹県肩見謙賢軒遣鍵険顕験鹸元原厳幻弦減源玄現絃舷言諺限乎個古呼固姑孤己庫弧戸故枯湖狐糊袴股胡菰虎誇跨鈷雇顧鼓五互伍午呉吾娯後御悟梧檎瑚碁語誤護醐乞鯉交佼侯候倖光公功効勾厚口向后喉坑垢好孔孝宏工巧巷幸広庚康弘恒慌抗拘控攻昂晃更杭校梗構江洪浩港溝甲皇硬稿糠紅紘絞綱耕考肯肱腔膏航荒行衡講貢購郊酵鉱砿鋼閤降項香高鴻剛劫号合壕拷濠豪轟麹克刻告国穀酷鵠黒獄漉腰甑忽惚骨狛込此頃今困坤墾婚恨懇昏昆根梱混痕紺艮魂些佐叉唆嵯左差査沙瑳砂詐鎖裟坐座挫債催再最哉塞妻宰彩才採栽歳済災采犀砕砦祭斎細菜裁載際剤在材罪財冴坂阪堺榊肴咲崎埼碕鷺作削咋搾昨朔柵窄策索錯桜鮭笹匙冊刷察拶撮擦札殺薩雑皐鯖捌錆鮫皿晒三傘参山惨撒散桟燦珊産算纂蚕讃賛酸餐斬暫残仕仔伺使刺司史嗣四士始姉姿子屍市師志思指支孜斯施旨枝止死氏獅祉私糸紙紫肢脂至視詞詩試誌諮資賜雌飼歯事似侍児字寺慈持時次滋治爾璽痔磁示而耳自蒔辞汐鹿式識鴫竺軸宍雫七叱執失嫉室悉湿漆疾質実蔀篠偲柴芝屡蕊縞舎写射捨赦斜煮社紗者謝車遮蛇邪借勺尺杓灼爵酌釈錫若寂弱惹主取守手朱殊狩珠種腫趣酒首儒受呪寿授樹綬需囚収周宗就州修愁拾洲秀秋終繍習臭舟蒐衆襲讐蹴輯週酋酬集醜什住充十従戎柔汁渋獣縦重銃叔夙宿淑祝縮粛塾熟出術述俊峻春瞬竣舜駿准循旬楯殉淳準潤盾純巡遵醇順処初所暑曙渚庶緒署書薯藷諸助叙女序徐恕鋤除傷償勝匠升召哨商唱嘗奨妾娼宵将小少尚庄床廠彰承抄招掌捷昇昌昭晶松梢樟樵沼消渉湘焼焦照症省硝礁祥称章笑粧紹肖菖蒋蕉衝裳訟証詔詳象賞醤鉦鍾鐘障鞘上丈丞乗冗剰城場壌嬢常情擾条杖浄状畳穣蒸譲醸錠嘱埴飾拭植殖燭織職色触食蝕辱尻伸信侵唇娠寝審心慎振新晋森榛浸深申疹真神秦紳臣芯薪親診身辛進針震人仁刃塵壬尋甚尽腎訊迅陣靭笥諏須酢図厨逗吹垂帥推水炊睡粋翠衰遂酔錐錘随瑞髄崇嵩数枢趨雛据杉椙菅頗雀裾澄摺寸世瀬畝是凄制勢姓征性成政整星晴棲栖正清牲生盛精聖声製西誠誓請逝醒青静斉税脆隻席惜戚斥昔析石積籍績脊責赤跡蹟碩切拙接摂折設窃節説雪絶舌蝉仙先千占宣専尖川戦扇撰栓栴泉浅洗染潜煎煽旋穿箭線繊羨腺舛船薦詮賎践選遷銭銑閃鮮前善漸然全禅繕膳糎噌塑岨措曾曽楚狙疏疎礎祖租粗素組蘇訴阻遡鼠僧創双叢倉喪壮奏爽宋層匝惣想捜掃挿掻操早曹巣槍槽漕燥争痩相窓糟総綜聡草荘葬蒼藻装走送遭鎗霜騒像増憎臓蔵贈造促側則即息捉束測足速俗属賊族続卒袖其揃存孫尊損村遜他多太汰詑唾堕妥惰打柁舵楕陀駄騨体堆対耐岱帯待怠態戴替泰滞胎腿苔袋貸退逮隊黛鯛代台大第醍題鷹滝瀧卓啄宅托択拓沢濯琢託鐸濁諾茸凧蛸只叩但達辰奪脱巽竪辿棚谷狸鱈樽誰丹単嘆坦担探旦歎淡湛炭短端箪綻耽胆蛋誕鍛団壇弾断暖檀段男談値知地弛恥智池痴稚置致蜘遅馳築畜竹筑蓄逐秩窒茶嫡着中仲宙忠抽昼柱注虫衷註酎鋳駐樗瀦猪苧著貯丁兆凋喋寵帖帳庁弔張彫徴懲挑暢朝潮牒町眺聴脹腸蝶調諜超跳銚長頂鳥勅捗直朕沈珍賃鎮陳津墜椎槌追鎚痛通塚栂掴槻佃漬柘辻蔦綴鍔椿潰坪壷嬬紬爪吊釣鶴亭低停偵剃貞呈堤定帝底庭廷弟悌抵挺提梯汀碇禎程締艇訂諦蹄逓邸鄭釘鼎泥摘擢敵滴的笛適鏑溺哲徹撤轍迭鉄典填天展店添纏甜貼転顛点伝殿澱田電兎吐堵塗妬屠徒斗杜渡登菟賭途都鍍砥砺努度土奴怒倒党冬凍刀唐塔塘套宕島嶋悼投搭東桃梼棟盗淘湯涛灯燈当痘祷等答筒糖統到董蕩藤討謄豆踏逃透鐙陶頭騰闘働動同堂導憧撞洞瞳童胴萄道銅峠鴇匿得徳涜特督禿篤毒独読栃橡凸突椴届鳶苫寅酉瀞噸屯惇敦沌豚遁頓呑曇鈍奈那内乍凪薙謎灘捺鍋楢馴縄畷南楠軟難汝二尼弐迩匂賑肉虹廿日乳入如尿韮任妊忍認濡禰祢寧葱猫熱年念捻撚燃粘乃廼之埜嚢悩濃納能脳膿農覗蚤巴把播覇杷波派琶破婆罵芭馬俳廃拝排敗杯盃牌背肺輩配倍培媒梅楳煤狽買売賠陪這蝿秤矧萩伯剥博拍柏泊白箔粕舶薄迫曝漠爆縛莫駁麦函箱硲箸肇筈櫨幡肌畑畠八鉢溌発醗髪伐罰抜筏閥鳩噺塙蛤隼伴判半反叛帆搬斑板氾汎版犯班畔繁般藩販範釆煩頒飯挽晩番盤磐蕃蛮匪卑否妃庇彼悲扉批披斐比泌疲皮碑秘緋罷肥被誹費避非飛樋簸備尾微枇毘琵眉美鼻柊稗匹疋髭彦膝菱肘弼必畢筆逼桧姫媛紐百謬俵彪標氷漂瓢票表評豹廟描病秒苗錨鋲蒜蛭鰭品彬斌浜瀕貧賓頻敏瓶不付埠夫婦富冨布府怖扶敷斧普浮父符腐膚芙譜負賦赴阜附侮撫武舞葡蕪部封楓風葺蕗伏副復幅服福腹複覆淵弗払沸仏物鮒分吻噴墳憤扮焚奮粉糞紛雰文聞丙併兵塀幣平弊柄並蔽閉陛米頁僻壁癖碧別瞥蔑箆偏変片篇編辺返遍便勉娩弁鞭保舗鋪圃捕歩甫補輔穂募墓慕戊暮母簿菩倣俸包呆報奉宝峰峯崩庖抱捧放方朋法泡烹砲縫胞芳萌蓬蜂褒訪豊邦鋒飽鳳鵬乏亡傍剖坊妨帽忘忙房暴望某棒冒紡肪膨謀貌貿鉾防吠頬北僕卜墨撲朴牧睦穆釦勃没殆堀幌奔本翻凡盆摩磨魔麻埋妹昧枚毎哩槙幕膜枕鮪柾鱒桝亦俣又抹末沫迄侭繭麿万慢満漫蔓味未魅巳箕岬密蜜湊蓑稔脈妙粍民眠務夢無牟矛霧鵡椋婿娘冥名命明盟迷銘鳴姪牝滅免棉綿緬面麺摸模茂妄孟毛猛盲網耗蒙儲木黙目杢勿餅尤戻籾貰問悶紋門匁也冶夜爺耶野弥矢厄役約薬訳躍靖柳薮鑓愉愈油癒諭輸唯佑優勇友宥幽悠憂揖有柚湧涌猶猷由祐裕誘遊邑郵雄融夕予余与誉輿預傭幼妖容庸揚揺擁曜楊様洋溶熔用窯羊耀葉蓉要謡踊遥陽養慾抑欲沃浴翌翼淀羅螺裸来莱頼雷洛絡落酪乱卵嵐欄濫藍蘭覧利吏履李梨理璃痢裏裡里離陸律率立葎掠略劉流溜琉留硫粒隆竜龍侶慮旅虜了亮僚両凌寮料梁涼猟療瞭稜糧良諒遼量陵領力緑倫厘林淋燐琳臨輪隣鱗麟瑠塁涙累類令伶例冷励嶺怜玲礼苓鈴隷零霊麗齢暦歴列劣烈裂廉恋憐漣煉簾練聯蓮連錬呂魯櫓炉賂路露労婁廊弄朗楼榔浪漏牢狼篭老聾蝋郎六麓禄肋録論倭和話歪賄脇惑枠鷲亙亘鰐詫藁蕨椀湾碗腕</code></pre>

<hr>

<p>サブセットは「サブセットフォントメーカー」を使用し、以下の手順で行う。 </p>
<ol>
 <li>ダウンロードした「<b>Noto Sans CJK JP</b>」を指定</li>
 <li>抽出する文字列を入力</li>
 <li>書体名は「NotoSansCJKjp」など分かりやすい名称にする (任意)</li>
 <li>「作成開始」をクリック</li>
</ol>

<p>ここで抽出したフォントのファイルサイズは500KB近くまで小さくなった。</p>


<h3>ファイル形式を用意する</h3>
<p>次に、ウェブフォントとして使用するファイル形式をそろえる。</p>
<p>「WOFFコンバータ」を使用し、以下の手順を行う。</p>

<ol>
 <li>[変換前ファイル] に先ほどサブセット化したフォントを指定</li>
 <li>[変換後ファイル] は、出力先を指定</li>
 <li>始めて作成する場合は「サンプルHTMLファイルを作成する」にチェックを入れてと確認が楽かもしれない (任意) </li>
</ol>
以上でウェブフォントの用意は全て終了。


<h2>CSS でフォントを指定する</h2>
<code>@font-face</code>でフォントを指定する。
モダンブラウザに加えて、IE用（複数）、Android・iOS用などの指定をする必要がある。(必要に応じて)

<h3>指定例（参考例）</h3>
CSSには以下の様な指定をする。
<pre class="language-css"><code>
@font-face {
    font-family: "NotoSansCJKjp";
    font-style: normal;
    font-weight: normal;
    src: url('../font/web/NotoSansCJKjp.eot');
    src: url('../font/web/NotoSansCJKjp.eot?#iefix') format('embedded-opentype'),
         url('../font/web/NotoSansCJKjp.woff') format('woff'),
         url('../font/web/NotoSansCJKjp.otf') format('opentype')
}</code></pre>


<h2>ウェブフォントを高速化する</h2>
<h3>ローカルフォントを利用する</h3>
「Noto Sans CJK JP」の <b>Light</b> をサブセットし、ウェブフォントとして指定したのが以下。

<pre class="language-css"><code>@font-face {
    font-family: "NotoSansCJKjp";
    font-style: normal;
    font-weight: 400;
    src: url('../font/web/NotoSansCJKjp.eot');
    src: <b>local('Noto Sans CJK JP Light')</b>, 
         url('../font/web/NotoSansCJKjp.eot?#iefix') format('embedded-opentype'),
         url('../font/web/NotoSansCJKjp.woff') format('woff'),
         url('../font/web/NotoSansCJKjp.otf') format('opentype')
}</code></pre>
今回追加したのが<code>src: local()</code>というプロパティ。

これは、ローカル(閲覧側)に指定のフォントと同名のフォントがあればそれを使う、というような指定で、そのフォントがインストールされているとサーバ上のウェブフォントは読み込まずにローカルのフォントで描画してくれるので早い。<span class="text-muted">[要出典]</span> 
サブセット化して抜けてしまった文字も、フォントがインストールされていれば問題なく表示ができる。

<p>マイナーでないフォントであれば、この指定が効いてくるのではないかと思う。「Noto Sans CJK JP」をPCに導入している人は必ずしも多くはないかもしれないが、指定して損はないので指定した。</p>

<hr>

## Noto使用のガイドライン（Google）
ちなみに Googleのガイドラインは「<a href="https://www.google.com/get/noto/help/guidelines/">Guidelines for Using Noto – Google Noto Fonts</a>」から確認できる。

<blockquote>
For a Japanese website:
<pre class="language-css"><code>font-family: "Noto Sans", "Noto Sans CJK JP", sans-serif;</code></pre></blockquote>


<hr>
最適化など見つけたら追記していく。


## 関連

* [Googleが配信している日本語ウェブフォント一覧](https://b.0218.jp/20171003234050.html)