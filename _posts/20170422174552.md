---
ID: 3025
post_title: '[Movable Type] 記事のプレビューで作成される一時ファイルの出力先を変更する方法'
published: true
post_date: 2017-04-22 17:45:52
modified_date: 2017-04-22 17:45:52
slug: 20170422174552.html
categories: |
  ---
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:343;s:4:\"name\";s:6:\"\u958B\u767A\";s:4:\"slug\";s:11:\"development\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:361;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:30;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:343;s:14:\"category_count\";i:30;s:20:\"category_description\";s:0:\"\";s:8:\"cat_name\";s:6:\"\u958B\u767A\";s:17:\"category_nicename\";s:11:\"development\";s:15:\"category_parent\";i:0;}"
  ...
tags: |
  ---
  - !php/object "O:7:\"WP_Term\":10:{s:7:\"term_id\";i:501;s:4:\"name\";s:12:\"Movable
  Type\";s:4:\"slug\";s:12:\"movable-type\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:509;s:8:\"taxonomy\";s:8:\"post_tag\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:2;s:6:\"filter\";s:3:\"raw\";}"
  ...
---
## 概要
アーカイブテンプレートとして設定されている記事のプレビューの出力先を動的に変更する
※ インデックステンプレートではない

## 設定方法
記事のテンプレートのアーカイブパスを以下のように変更する。

```
&lt;mt:if name=&quot;request.__mode&quot; eq=&quot;preview_entry&quot;&gt;tmp/&lt;mt:else&gt;blog/&lt;/mt:if&gt;%y/%m/%-f
```

`%y/%m/%-f`らへんは任意。要は、`<mt:if>`で出力するディレクトリを出し分けする。

### 出力結果
前述の設定した場合、プレビュー時の一時ファイルは以下になり、
```
tmp/2017/04/mt-preview***.html
```

公開時は以下に保存される。
```
blog/2017/04/blog-title.html
```