---
title: "[CSS in JS] Emotion ã®é¸å®šç†ç”±ğŸ‘©â€ğŸ¤"
date: 2022-07-14T14:24:17Z
updated: 2022-08-09T08:16:17Z
tags:
  - CSS in JS
  - Emotion
---

## èƒŒæ™¯

æ–°è¦ã§ CSS in JS ã‚’åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€[Emotion](https://github.com/emotion-js/emotion)ã‚’é¸å®šã—ãŸã€‚

å€‹äººçš„ã«é¸å®šç†ç”±ã‚’ã¾ã¨ã‚ã¦ãŠããŸã„ã®ã§ç°¡æ½”ã«æ›¸ã„ã¦ã„ãã€‚

## CSS in JS ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ±‚ã‚ã¦ã„ã‚‹æ©Ÿèƒ½

CSS in JS ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦å¿…è¦ã¨ã—ãŸæ©Ÿèƒ½ã¯ä»¥ä¸‹ã€‚

- ã‚¿ã‚°ä»˜ããƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«è¨˜æ³•ãŒä½¿ãˆã‚‹ã“ã¨
  - CSS ã®è¨˜æ³•ãŒä½¿ãˆã‚‹ãŸã‚æ—¢å­˜å®Ÿè£…ï¼ˆCSS ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’ãã®ã¾ã¾ç”Ÿã‹ã—ã‚„ã™ã„
    ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚¿ã‚¤ãƒ«è¨˜æ³•ã ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã‚’ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆe.g.: `font-size` â†’ `fontSize`ï¼‰
  - CSS in JS ã«æ˜ã‚‹ããªã„ãƒ¡ãƒ³ãƒãƒ¼ã§ã‚‚ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãŒç•°ãªã‚‹ã¨ã„ã†éšœå£ãŒãªãå‚å…¥ã—ã‚„ã™ã„
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ãŒå®šç¾©ã§ãã‚‹ã“ã¨

## CSS in JS ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é¸å®šã™ã‚‹ãŸã‚ã®æ¡ä»¶

é¸å®šæ¡ä»¶ã¨ã—ã¦ã¯ä»¥ä¸‹ã€‚

- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå¤šã„ã“ã¨
  - ä»–ç¤¾äº‹ä¾‹ã‚„è‘—åãª UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒ Emotion ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹äº‹ä¾‹ãŒå¤šãè¦³æ¸¬ã§ããŸ
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- Next.js ä¸Šã§å‹•ä½œã•ã›ã‚‹äºˆå®šã ã£ãŸãŸã‚ã€styled-componentsã€Emotion ãªã©ã§ã‚ã‚Œã°ã€SWC ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«åˆ‡ã‚Šæ›¿ãˆã‚‹é¸æŠã‚‚ã§ãã‚‹

## Zero-runtime

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è¦³ç‚¹ã§ Zero-runtime CSS in JS ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚é¸æŠè‚¢ã®ã²ã¨ã¤ã¨ã—ã¦æŒ™ãŒã£ãŸã€‚

API ãŒ styled-components ã‚„ Emotion ãªã©ã®å…ˆç™ºãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨åŒæ§˜ã®æ§‹æ–‡ã‚’æœ‰ã—ã¦ã„ã‚‹[linaria](https://linaria.dev/)ã‚’ç¢ºèªã—ã¦ã¿ãŸã€‚

---

å°è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã¯è‰¯ã•ãã†ã ãŒã€ä»¥ä¸‹ã®ç‚¹ã§ linaria ã¯è¦‹é€ã£ãŸã€‚

- å‹•çš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤šç”¨ã—ãŸå ´åˆã« CSS Custom Properties ã®å‡ºåŠ›ãŒå¤šããªã‚Šã€HTML ãŒè‚¥å¤§åŒ–ã—ã¦ã—ã¾ã†
- å‹•çš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã®å€¤ãŒ`undefined`ãªå ´åˆã«ä¸è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ®‹ã‚‹

  ```jsx
  const Heading = styled.h1`
    background-color: ${({ bg }) => bg};
  `;

  const Example = () => {
    return (
      <>
        <Heading bg="red">Red Heading</Heading>
        <Heading>Heading</Heading>
      </>
    );
  };
  ```

  â†“

  ```html
  <h1 class="t1vg9j5w" style="--t1vg9j5w-0:red;">Red Heading</h1>
  <h1 class="t1vg9j5w" style="--t1vg9j5w-0:undefined;">Heading</h1>

  <style>
    .t1vg9j5w {
      background-color: var(--t1vg9j5w-0);
    }
  </style>
  ```

  å€¤ãŒ`undefined`ã®å ´åˆã§ã‚‚ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ®‹ã‚‹

- åŒã˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒã‚¹ãƒˆã™ã‚‹ã¨å†åˆ©ç”¨ã•ã‚ŒãŸ CSS Custom Properties ãŒä¸Šæ›¸ãã•ã‚Œã¦ã„ã¾ã„æ„å›³ã—ãŸå‹•ä½œã‚’ã—ãªã„

  ```jsx
  const Stack = styled.div`
    & > * + * {
      margin-top: ${({ spacing }) => spacing || "0"};
    }
  `;

  const Example = () => {
    return (
      <Stack spacing="1rem">
        <Stack></Stack>
        <Stack></Stack> {/* ğŸ‘ˆ */}
      </Stack>
    );
  };
  ```

  ãƒã‚¹ãƒˆã•ã‚ŒãŸ 2 ç•ªç›®ã®`Stack`ã®`margin-top`ã¯`1rem`ã¨ãªã‚‹ã“ã¨ã‚’æœŸå¾…ã™ã‚‹ãŒã€CSS Custom Properties ã®ä¸Šæ›¸ãã«ã‚ˆã£ã¦`0`ã«ãªã£ã¦ã—ã¾ã†

- æ¡ç”¨äº‹ä¾‹ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå°‘ãªã„

## styled-components vs Emotion

æ¤œè¨çµæœã€å€™è£œã¯ [styled-components](https://github.com/styled-components/styled-components) ã‚‚ã—ãã¯ [Emotion](https://github.com/emotion-js/emotion) ã® 2 ã¤ã«ãªã£ãŸã€‚

- ä»¥å‰ã¯å¾Œç™ºã® Emotion ã¯åˆ©ç”¨ã§ãã‚‹ API ãŒå¤šã‹ã£ãŸ
  - ç¾çŠ¶ã€styled-components ã®åŒæ§˜ã®æ©Ÿèƒ½ã‚‚æœ‰ã—ã¦ã„ã‚‹
    ãƒ©ã‚¤ãƒ–ãƒ©ãƒª Â  | ã‚¿ã‚°ä»˜ããƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚¿ã‚¤ãƒ« | ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ« | ãƒã‚¹ãƒˆã‚»ãƒ¬ã‚¯ã‚¿ | TypeScript ã‚µãƒãƒ¼ãƒˆ | Server Side Rendering
    :--: | :--: | :--: | :--: | :--: | :--: | :--:
    styled-components | âœ… | âœ… | âœ… | âœ… | âœ… | âœ…
    Emotion | âœ… | âœ… | âœ… | âœ… | âœ… | âœ…
- ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœã‚’è¦‹ã‚‹ã¨ Emotion ã®æ–¹ãŒ styled-components ã‚ˆã‚Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯è‰¯ã„  
  https://stitches.dev/docs/benchmarks

### ãƒˆãƒ¬ãƒ³ãƒ‰ã®æ¯”è¼ƒ

npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ã ã‘ã§è¦‹ã‚‹ã¨ emotion ãŒ styled-components ã‚ˆã‚Šã‚‚å¤šããªã£ã¦ã„ã‚‹ï¼ˆemotion ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹ãŸã‚å˜ç´”æ¯”è¼ƒã¯é›£ã—ã„ï¼‰ã€‚

<figure>
  <img src="https://user-images.githubusercontent.com/3617124/185824687-7e858aa7-533b-4b80-a046-b5818236518e.png" alt="">
  <figcaption>
  <a href="https://www.npmtrends.com/">npm trends</a>ã«ã‚ˆã‚‹ @emotion/styled ã¨ styled-components ã®æ¯”è¼ƒ<br>
  <a href="https://npmtrends.com/@emotion/styled-vs-styled-components">@emotion/styled-vs-styled-components</a>
  </figcaption>
</figure>

ã¡ãªã¿ã« GitHub ã®ã‚¹ã‚¿ãƒ¼æ•°ã¯ styled-components ã®æ–¹ãŒå¤šã„ã€‚

### `next build` ã®çµæœæ¯”è¼ƒ

Next.js ä¸Šã§ styled-components ã¨ Emotion ã®ãã‚Œãã‚Œã‚’åˆ©ç”¨ã—ãŸå ´åˆã®ãƒ“ãƒ«ãƒ‰çµæœã‚’æ¯”è¼ƒã—ãŸã€‚

ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’æ¯”è¼ƒã™ã‚‹ã¨ Emotion ã®æ–¹ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯å°ã•ã„ã‚ˆã†ã ã£ãŸã€‚

#### styled-components

å¯¾è±¡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

- [next](https://www.npmjs.com/package/next): v12.2.4
- [styled-components](https://www.npmjs.com/package/styled-components): v5.3.5

`next build`ã®å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

```
Page                                       Size     First Load JS
â”Œ â—‹ /                                      3.27 kB        90.6 kB
â”œ   /_app                                  0 B            87.3 kB
â”œ â—‹ /404                                   2.67 kB          90 kB
â”” â—‹ /other                                 1.06 kB        88.4 kB
+ First Load JS shared by all              87.3 kB
  â”œ chunks/framework-5f4595e5518b5600.js   42 kB
  â”œ chunks/main-13980ce3a4ae3dcf.js        29 kB
  â”œ chunks/pages/_app-5392701c868a5bd6.js  14.7 kB
  â”” chunks/webpack-7b5c3cf34b918637.js     1.58 kB
```

https://github.com/hiro0218/css-in-js-analysis/tree/styled-components

#### Emotion

å¯¾è±¡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

- [@emotion/react](https://www.npmjs.com/package/@emotion/react): v11.10.0
- [@emotion/styled](https://www.npmjs.com/package/@emotion/styled): v11.10.0
- [next](https://www.npmjs.com/package/next): v12.2.4

`next build`ã®å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

```
Page                                       Size     First Load JS
â”Œ â—‹ /                                      3.21 kB        84.1 kB
â”œ   /_app                                  0 B            80.8 kB
â”œ â—‹ /404                                   2.67 kB        83.5 kB
â”” â—‹ /other                                 1.06 kB        81.9 kB
+ First Load JS shared by all              80.8 kB
  â”œ chunks/framework-5f4595e5518b5600.js   42 kB
  â”œ chunks/main-13980ce3a4ae3dcf.js        29 kB
  â”œ chunks/pages/_app-0710a7201ba41fb0.js  8.07 kB
  â”” chunks/webpack-3bd2f374eaae16d4.js     1.71 kB
```

https://github.com/hiro0218/css-in-js-analysis/tree/emotion

## ã¾ã¨ã‚

- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦³ç‚¹ã ã‘ã§ã¿ã‚Œã° Zero-runtime ã¯é­…åŠ›çš„ã ã£ãŸãŒã€è¦ä»¶ã‚’æº€ãŸã›ãªã‹ã£ãŸ
- styled-components ã‚„ Emotion ã®ã‚ˆã†ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ãŒå¤šã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é¸æŠã™ã‚‹æ–¹ãŒãƒŠãƒ¬ãƒƒã‚¸ã‚’æ‹¾ã£ã¦ã„ãã‚„ã™ã„ã®ã§è‰¯ã•ãã†  
  å¥½ã¿ã®å•é¡Œã‚‚ã‚ã‚‹ãŒã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦³ç‚¹ã§è¨€ãˆã° Emotion ãŒè‰¯ã•ãã†ã¨ã„ã†çµè«–ã«è‡³ã£ãŸ
