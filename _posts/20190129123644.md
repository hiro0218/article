---
ID: 4059
post_title: '[Nuxt.js v2.4.0] nuxt-sass-resources-loaderのエラー対処方法'
published: true
post_date: 2019-01-29 12:36:44
modified_date: 2019-01-29 16:41:37
slug: 20190129123644.html
categories: |
  ---
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:536;s:4:\"name\";s:7:\"Nuxt.js\";s:4:\"slug\";s:7:\"nuxt.js\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:544;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:151:\"Vue.js
  \u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306E\u30D5\u30EC\u30FC\u30E0\u30EF\u30FC\u30AF\u3067\u3042\u308B
  Nuxt.js \u306B\u3064\u3044\u3066\u3001\u30C8\u30E9\u30D6\u30EB\u30B7\u30E5\u30FC\u30C6\u30A3\u30F3\u30B0\u306A\u3069\u3092\u8A18\u8F09\u3057\u3066\u3044\u307E\u3059\";s:6:\"parent\";i:0;s:5:\"count\";i:5;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:536;s:14:\"category_count\";i:5;s:20:\"category_description\";s:151:\"Vue.js
  \u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306E\u30D5\u30EC\u30FC\u30E0\u30EF\u30FC\u30AF\u3067\u3042\u308B
  Nuxt.js \u306B\u3064\u3044\u3066\u3001\u30C8\u30E9\u30D6\u30EB\u30B7\u30E5\u30FC\u30C6\u30A3\u30F3\u30B0\u306A\u3069\u3092\u8A18\u8F09\u3057\u3066\u3044\u307E\u3059\";s:8:\"cat_name\";s:7:\"Nuxt.js\";s:17:\"category_nicename\";s:7:\"nuxt.js\";s:15:\"category_parent\";i:0;}"
  ...
tags: |
  ---
  - Nuxt.js
  - Vue.js
  ...
---
## 概要

Nuxt.js v2.4.0にアップデートし、`yarn dev`した際にエラーが発生。

```language-bash
$ yarn dev

 ERROR  Failed to compile with 10 errors             friendly-errors 11:14:32


 ERROR  in ./components/PostData.vue?vue&amp;type=style&amp;index=0&amp;lang=scss&amp;

Module build failed (from ./node_modules/sass-loader/lib/loader.js):

      color: $oc-gray-4;
            ^
      Undefined variable: &quot;$oc-gray-4&quot;.
      in ./components/PostData.vue (line 179, column 14)
```

## 原因

[nuxt-sass-resources-loader](https://github.com/anteriovieira/nuxt-sass-resources-loader)のissue([Package seems to be broken with nuxt 2.4.0](https://github.com/anteriovieira/nuxt-sass-resources-loader/issues/25))を確認すると、[@nuxtjs/style-resources](https://github.com/nuxt-community/style-resources-module)を使うように書いてあった。

リプレースする方が手っ取り早いので変えてしまう。

## 解決方法

```language-bash
$ yarn remove nuxt-sass-resources-loader
$ yarn add -D @nuxtjs/style-resources
```

`nuxt-sass-resources-loader`を使っていた際は、`nuxt.config.js`で下記のように記述していたが、
```language-js
  modules: [
    [
      'nuxt-sass-resources-loader',
      [
        '~/assets/style/Settings/_colors.scss',
        '~/assets/style/Settings/_variables.scss',
        '~/assets/style/Tools/_mixins.scss',
      ],
    ],
  ],
```

まるっと下記のように`@nuxtjs/style-resources`に置き換えてしまう。

```language-js
  modules: [
    '@nuxtjs/style-resources',
  ],

  styleResources: {
    sass: [
      '~/assets/style/Settings/_colors.scss',
      '~/assets/style/Settings/_variables.scss',
      '~/assets/style/Tools/_mixins.scss',
    ],
  },
```

---

以上で問題なくビルドも通った。