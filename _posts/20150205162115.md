---
ID: 1677
post_title: '[FuelPHP] バリデートの結果を簡潔に取得する'
published: true
post_date: 2015-02-05 16:21:15
modified_date: 2015-02-05 16:21:15
slug: 20150205162115.html
categories: |
  ---
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:300;s:4:\"name\";s:7:\"FuelPHP\";s:4:\"slug\";s:7:\"fuelphp\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:358;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:17;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:300;s:14:\"category_count\";i:17;s:20:\"category_description\";s:0:\"\";s:8:\"cat_name\";s:7:\"FuelPHP\";s:17:\"category_nicename\";s:7:\"fuelphp\";s:15:\"category_parent\";i:0;}"
  ...
tags: |
  ---
  - FuelPHP
  ...
---
雛形として残しておきたかったので、骨組みをメモしておく。
<!--more-->
<h2>仕様</h2>
判定諸々はValidationクラスにお任せ。<span class="text-muted">(オリジナルのルールを追加するときはそうもいかないけれど…)</span>
とりあえず、NGだった場合は"<b>エラーメッセージ</b>"さえ返ってくれば良い。

<h2>コード</h2>
<pre class="prettyprint linenums lang-php">public static function validate() {
  $val = Validation::forge();

  $val->add('name', '名前')->add_rule('required');
  $val->add('uri', 'URI')->add_rule('required')->add_rule('valid_url');

  return ( $val->run() ) ? '' : $val->show_errors();
}</pre>

<code>$val->run()</code>で結果を判定してNGならメッセージを<code>return</code>してるだけ。
判定結果がOKの時に何かしたい場合はこれだとクチャクチャになるけど、自分で使う分にはOKの場合、特に何もしないのでこういう流れでやってる。
 
他はドキュメントまんまなので、バリデーションルールなんかはドキュメントを参考にする。
<a href="http://fuelphp.jp/docs/1.8/classes/validation/validation.html#rules">http://fuelphp.jp/docs/1.8/classes/validation/validation.html#rules</a>