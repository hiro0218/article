---
ID: 4247
post_title: '[JavaScript] 日付のフォーマットをyyyy/mm/ddにする方法'
author: hiro
layout: post
permalink: https://b.0218.jp/20190520233053.html
published: true
post_date: 2019-05-20 23:30:53
modified_date: ""
slug: 20190520233053.html
---
## 背景

moment.jsやdate-fnsを使っていたが、単純な日付のフォーマット変換に関して、巨大なライブラリを必要としないので自前で実装をする。

結果として、少なくとも10KBほどあったサイズが数バイトで済んだ。

<!--more-->

## 実装

### 仕様

- `yyyy/mm/dd`形式の文字列で変換する関数
- 引数は日付相当の文字列
- 変換できない場合は空文字を返却

### コード

```js
const formatDate = strDate =&gt; {
  let date = &quot;&quot;;

  // convert: string -&gt; date
  try {
    if (typeof strDate === &quot;string&quot;) {
      date = new Date(strDate).toISOString();
    }
  } catch (e) {
    console.log(e);
  }

  // format: yyy/mm/dd
  if (date) {
    date = date.split(&quot;T&quot;)[0].replace(/-/g, &quot;/&quot;);
  }

  return date;
};
```