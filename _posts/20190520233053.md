---
ID: 4247
post_title: '[JavaScript] 日付のフォーマットをyyyy/mm/ddにする方法'
published: true
post_date: 2019-05-20 23:30:53
modified_date: 2019-05-20 23:32:46
slug: 20190520233053.html
categories: |
  ---
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:384;s:4:\"name\";s:10:\"JavaScript\";s:4:\"slug\";s:10:\"javascript\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:402;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:53;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:384;s:14:\"category_count\";i:53;s:20:\"category_description\";s:0:\"\";s:8:\"cat_name\";s:10:\"JavaScript\";s:17:\"category_nicename\";s:10:\"javascript\";s:15:\"category_parent\";i:0;}"
  ...
tags: |
  --- false
  ...
---
## 背景

moment.jsやdate-fnsを使っていたが、単純な日付のフォーマット変換に関して、巨大なライブラリを必要としないので自前で実装をする。

結果として、少なくとも10KBほどあったサイズが数バイトで済んだ。

<!--more-->

## 実装

### 仕様

- `yyyy/mm/dd`形式の文字列で変換する関数
- 引数は日付相当の文字列
- 変換できない場合は空文字を返却

### コード

```js
const formatDate = strDate =&gt; {
  let date = &quot;&quot;;

  // convert: string -&gt; date
  try {
    if (typeof strDate === &quot;string&quot;) {
      date = new Date(strDate).toISOString();
    }
  } catch (e) {
    console.log(e);
  }

  // format: yyy/mm/dd
  if (date) {
    date = date.split(&quot;T&quot;)[0].replace(/-/g, &quot;/&quot;);
  }

  return date;
};
```