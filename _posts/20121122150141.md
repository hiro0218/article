---
ID: 554
post_title: '[JavaScript] 数字しか入力できないInputを実装する方法'
published: true
post_date: 2012-11-22 15:01:41
modified_date: 2018-08-25 22:56:43
slug: 20121122150141.html
categories: |
  ---
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:384;s:4:\"name\";s:10:\"JavaScript\";s:4:\"slug\";s:10:\"javascript\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:402;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:53;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:384;s:14:\"category_count\";i:53;s:20:\"category_description\";s:0:\"\";s:8:\"cat_name\";s:10:\"JavaScript\";s:17:\"category_nicename\";s:10:\"javascript\";s:15:\"category_parent\";i:0;}"
  ...
tags: |
  --- false
  ...
---
<div class="c-alert is-info">以前はjQueryで実装していたが、JavaScriptで再実装し記事をリライト</div>

<!--more-->

## 仕様

- 0〜9までの数値のみを許容する
  入力完了後に文字列を削除
- ペースト許容しない
- ドラッグ&ドロップ許容しない

## デモ

<iframe height='265' scrolling='no' title='Input that only accepts numbers' src='//codepen.io/hiro0218/embed/ZMQJrV/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/hiro0218/pen/ZMQJrV/'>Input that only accepts numbers</a> by hiro (<a href='https://codepen.io/hiro0218'>@hiro0218</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

## 実装

```language-js
let input = document.querySelector(&quot;.numeric-input&quot;);

// disable event function
const disableEvent = e =&gt; {
  e.preventDefault();
  e.stopPropagation();
};

// disable paste
input.addEventListener(&quot;paste&quot;, disableEvent);

// disable drag&amp;drop
input.addEventListener(&quot;drop&quot;, disableEvent);

// remove string
input.addEventListener(&quot;keyup&quot;, function(e) {
  let tmp = [];

  this.value.split(&quot;&quot;).forEach(function(item, i) {
    if (item.match(/[0-9]/gi)) {
      tmp.push(item);
    }
  });

  if (tmp.length &gt; 0) {
    this.value = tmp.join(&quot;&quot;);
  } else {
    this.value = &quot;&quot;;
  }
});
```