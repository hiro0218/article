---
ID: 3292
title: >
  PHPのバージョンをダウングレードする方法
published: true
date: 2017-10-02 02:05:23
updated: 2017-10-02 02:05:23
slug: 20171002020523.html
categories:
  - PHP
tags:
  - CentOS
---
## 概要
うっかりPHP 7.2をインストールしてしまった為、PHP 7.1にダウングレードしたい。

## 環境
* CentOS 7
* PHP 7.2 がインストールされている

## 手順
### 確認
まず、インストールされているPHPを確認する。
```
yum list installed | grep php
```

下記のような一覧が表示されるので、メモしておく。
```
php.x86_64              7.2.el7.remi     @remi-php72
php-cli.x86_64          7.2.el7.remi     @remi-php72
php-common.x86_64       7.2.el7.remi     @remi-php72
php-devel.x86_64        7.2.el7.remi     @remi-php72
php-fpm.x86_64          7.2.el7.remi     @remi-php72
php-gd.x86_64           7.2.el7.remi     @remi-php72
php-gmp.x86_64          7.2.el7.remi     @remi-php72
php-json.x86_64         7.2.el7.remi     @remi-php72
php-mbstring.x86_64     7.2.el7.remi     @remi-php72
php-mcrypt.x86_64       7.2.el7.remi     @remi-php72
php-mysqlnd.x86_64      7.2.el7.remi     @remi-php72
php-opcache.x86_64      7.2.el7.remi     @remi-php72
php-pdo.x86_64          7.2.el7.remi     @remi-php72
php-xml.x86_64          7.2.el7.remi     @remi-php72
```

### リポジトリを変更
向き先がremi-php72になっているはずなので、編集する。
```
vi /etc/yum.repos.d/remi-php72.repo
```

`enabled`が`1`だと、デフォルトのレポジトリになるので、`0`にしておく。
私はremi-php71の方をデフォルトに変更しておいた。
```
vi /etc/yum.repos.d/remi-php71.repo
```

### PHPを入れ直す（remove/install）
まずは、インストール済みのPHPをアンインストールする。

先程メモしておいたインストールされているPHP一覧を使う。
下記のように指定して一括でremoveする。
```
yum remove -y php php-cli php-common php-fpm php-gd php-gmp php-json php-mbstring php-mysqlnd php-opcache php-pdo php-pear php-pecl-igbinary php-pecl-mcrypt php-pecl-memcached php-pecl-msgpack php-process php-xml
```

アンインストールが終わったところで、次は同じ指定でinstallを行う。
```
yum install -y php php-cli php-common php-fpm php-gd php-gmp php-json php-mbstring php-mysqlnd php-opcache php-pdo php-pear php-pecl-igbinary php-pecl-mcrypt php-pecl-memcached php-pecl-msgpack php-process php-xml
```
レポジトリの指定をremi-php71にしているのでPHP 7.1系がインストールされる。`*.repo`ファイルを修正せずとも`--enablerepo=remi-php71`などと指定してインストールする事も可能。