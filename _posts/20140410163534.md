---
ID: 1193
post_title: '[WordPress] サムネイルを一括で解除する方法(設定の削除)'
published: true
post_date: 2014-04-10 16:35:34
modified_date: 2014-06-20 10:30:14
slug: 20140410163534.html
categories: |
  ---
  - !php/object "O:7:\"WP_Term\":16:{s:7:\"term_id\";i:76;s:4:\"name\";s:9:\"WordPress\";s:4:\"slug\";s:9:\"wordpress\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:78;s:8:\"taxonomy\";s:8:\"category\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:37;s:6:\"filter\";s:3:\"raw\";s:6:\"cat_ID\";i:76;s:14:\"category_count\";i:37;s:20:\"category_description\";s:0:\"\";s:8:\"cat_name\";s:9:\"WordPress\";s:17:\"category_nicename\";s:9:\"wordpress\";s:15:\"category_parent\";i:0;}"
  ...
tags: |
  ---
  - !php/object "O:7:\"WP_Term\":10:{s:7:\"term_id\";i:62;s:4:\"name\";s:5:\"MySQL\";s:4:\"slug\";s:5:\"mysql\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:63;s:8:\"taxonomy\";s:8:\"post_tag\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:19;s:6:\"filter\";s:3:\"raw\";}"
  - !php/object "O:7:\"WP_Term\":10:{s:7:\"term_id\";i:421;s:4:\"name\";s:9:\"WordPress\";s:4:\"slug\";s:9:\"wordpress\";s:10:\"term_group\";i:0;s:16:\"term_taxonomy_id\";i:79;s:8:\"taxonomy\";s:8:\"post_tag\";s:11:\"description\";s:0:\"\";s:6:\"parent\";i:0;s:5:\"count\";i:36;s:6:\"filter\";s:3:\"raw\";}"
  ...
---
プラグインなどで一括で記事にサムネイルを設定することができますが、誤った画像を設定してしまった場合、それらすべてを解除していくのは骨です。時間の無駄です。
今回はデータベースから直接解除してみたいと思います。
<!--more-->
<h2>サムネイルが設定されている記事を確認する</h2>
以下のSQL文でサムネイルが設定されている記事が確認することができます。
```language-sql
SELECT * FROM `wp_postmeta` WHERE `meta_key` = '_thumbnail_id';
```

上記のSQL実行で以下のような結果が取得できます。
&lt;table class=&quot;table table-bordered&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;meta_id&lt;/th&gt;&lt;th&gt;post_id&lt;/th&gt;&lt;th&gt;meta_key&lt;/th&gt;&lt;th&gt;meta_value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1600&lt;/td&gt;&lt;td&gt;347&lt;/td&gt;&lt;td&gt;_thumbnail_id&lt;/td&gt;&lt;td&gt;1182&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1599&lt;/td&gt;&lt;td&gt;357&lt;/td&gt;&lt;td&gt;_thumbnail_id&lt;/td&gt;&lt;td&gt;1182&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1598&lt;/td&gt;&lt;td&gt;547&lt;/td&gt;&lt;td&gt;_thumbnail_id&lt;/td&gt;&lt;td&gt;1182&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1597&lt;/td&gt;&lt;td&gt;553&lt;/td&gt;&lt;td&gt;_thumbnail_id&lt;/td&gt;&lt;td&gt;1182&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1596&lt;/td&gt;&lt;td&gt;582&lt;/td&gt;&lt;td&gt;_thumbnail_id&lt;/td&gt;&lt;td&gt;1182&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1595&lt;/td&gt;&lt;td&gt;598&lt;/td&gt;&lt;td&gt;_thumbnail_id&lt;/td&gt;&lt;td&gt;1182&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;

また、記事のタイトルなどと紐づけて抽出したい場合は&lt;code&gt;post_id&lt;/code&gt;でjoinすれば良いのではないかと思います。

&lt;h2&gt;特定のサムネイル設定を削除する&lt;/h2&gt; 
&lt;code&gt;wp_postmeta&lt;/code&gt;の&lt;code&gt;meta_value&lt;/code&gt;の値がサムネイルのIDです。これを条件に削除を実行します。
サムネイルIDが何であるかについては、管理画面などからご確認ください。
```language-sql
DELETE FROM `wp_postmeta` WHERE `meta_key` = '_thumbnail_id' AND `meta_value` = '＜サムネイルID＞';
```

&lt;h2&gt;すべてのサムネイル設定を削除する&lt;/h2&gt; 
すべてのサムネイル設定を削除する場合は以下です。
```language-sql
DELETE FROM `wp_postmeta` WHERE `meta_key` = '_thumbnail_id';
```